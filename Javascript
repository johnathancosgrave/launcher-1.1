const browserFrame = document.getElementById('browser-frame');
const urlInput = document.getElementById('url-input');
const goBtn = document.getElementById('go-btn');
const backBtn = document.getElementById('back-btn');
const forwardBtn = document.getElementById('forward-btn');
const refreshBtn = document.getElementById('refresh-btn');

let history = [];
let historyIndex = -1;

function navigate() {
    let url = urlInput.value;
    if (!url.startsWith('http://') && !url.startsWith('https://')) {
        url = 'https://' + url;
    }
    browserFrame.src = url;

    // Add to history
    if (historyIndex < history.length - 1) {
        history = history.slice(0, historyIndex + 1);
    }
    history.push(url);
    historyIndex++;
}

goBtn.addEventListener('click', navigate);

urlInput.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
        navigate();
    }
});

backBtn.addEventListener('click', () => {
    if (historyIndex > 0) {
        historyIndex--;
        browserFrame.src = history[historyIndex];
        urlInput.value = history[historyIndex];
    }
});

forwardBtn.addEventListener('click', () => {
    if (historyIndex < history.length - 1) {
        historyIndex++;
        browserFrame.src = history[historyIndex];
        urlInput.value = history[historyIndex];
    }
});

refreshBtn.addEventListener('click', () => {
    browserFrame.contentWindow.location.reload();
});

// A "private" feature: clear history when the page is unloaded
window.addEventListener('beforeunload', () => {
    history = [];
    historyIndex = -1;
});
